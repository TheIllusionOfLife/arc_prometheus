#!/bin/bash
# Pre-push hook - runs full CI checks before pushing to remote
# This prevents pushing code that will fail CI

set -e  # Exit on first error

echo ""
echo "üîç Running pre-push checks..."
echo ""

# Run the full CI suite using make
if ! make ci 2>&1; then
    echo ""
    echo "‚ùå Pre-push checks failed!"
    echo ""
    echo "Fix the issues above and try again."
    echo "Or use 'git push --no-verify' to skip (not recommended)."
    echo ""
    exit 1
fi

echo ""
echo "‚úÖ Pre-push checks passed! Pushing to remote..."
echo ""

exit 0
